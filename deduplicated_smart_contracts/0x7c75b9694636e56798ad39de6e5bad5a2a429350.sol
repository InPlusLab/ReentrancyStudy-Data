// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;

contract Arctan {
    uint128[256] data = [
        0x1,
        0x2,
        0x5,
        0xa,
        0x14,
        0x28,
        0x51,
        0xa2,
        0x145,
        0x28b,
        0x517,
        0xa2f,
        0x145f,
        0x28be,
        0x517c,
        0xa2f9,
        0x145f3,
        0x28be6,
        0x517cc,
        0xa2f98,
        0x145f30,
        0x28be60,
        0x517cc1,
        0xa2f983,
        0x145f306,
        0x28be60d,
        0x517cc1b,
        0xa2f9836,
        0x145f306d,
        0x28be60db,
        0x517cc1b7,
        0xa2f9836e,
        0x145f306dc,
        0x28be60db9,
        0x517cc1b72,
        0xa2f9836e4,
        0x145f306dc9,
        0x28be60db93,
        0x517cc1b727,
        0xa2f9836e4e,
        0x145f306dc9c,
        0x28be60db939,
        0x517cc1b7272,
        0xa2f9836e4e4,
        0x145f306dc9c8,
        0x28be60db9391,
        0x517cc1b72722,
        0xa2f9836e4e44,
        0x145f306dc9c88,
        0x28be60db93910,
        0x517cc1b727220,
        0xa2f9836e4e441,
        0x145f306dc9c882,
        0x28be60db939105,
        0x517cc1b727220a,
        0xa2f9836e4e4415,
        0x145f306dc9c882a,
        0x28be60db9391054,
        0x517cc1b727220a9,
        0xa2f9836e4e44152,
        0x145f306dc9c882a5,
        0x28be60db9391054a,
        0x517cc1b727220a94,
        0xa2f9836e4e441529,
        0x145f306dc9c882a53,
        0x28be60db9391054a7,
        0x517cc1b727220a94f,
        0xa2f9836e4e441529f,
        0x145f306dc9c882a53f,
        0x28be60db9391054a7f,
        0x517cc1b727220a94fe,
        0xa2f9836e4e441529fc,
        0x145f306dc9c882a53f8,
        0x28be60db9391054a7f0,
        0x517cc1b727220a94fe1,
        0xa2f9836e4e441529fc2,
        0x145f306dc9c882a53f84,
        0x28be60db9391054a7f09,
        0x517cc1b727220a94fe13,
        0xa2f9836e4e441529fc27,
        0x145f306dc9c882a53f84e,
        0x28be60db9391054a7f09d,
        0x517cc1b727220a94fe13a,
        0xa2f9836e4e441529fc275,
        0x145f306dc9c882a53f84ea,
        0x28be60db9391054a7f09d5,
        0x517cc1b727220a94fe13a5,
        0xa2f9836e4e441529fc2721,
        0x145f306dc9c882a53f84cfd,
        0x28be60db9391054a7f08fca,
        0x517cc1b727220a94fe0ce18,
        0xa2f9836e4e441529fbf104a,
        0x145f306dc9c882a53f69c164,
        0x28be60db9391054a7e308945,
        0x517cc1b727220a94f749466f,
        0xa2f9836e4e441529c5d42c02,
        0x145f306dc9c882a5245b55128,
        0x28be60db93910549a5bd26b6b,
        0x517cc1b727220a8e33ae31fb0,
        0xa2f9836e4e4414f3a8fb88628,
        0x145f306dc9c8828a15ef034288,
        0x28be60db93910471325a9836cd,
        0x517cc1b7272203ca9899bdfb7a,
        0xa2f9836e4e43ded6d057e8660e,
        0x145f306dc9c8677ba99d33447c5,
        0x28be60db93902bfdcfcc184c872,
        0x517cc1b7271b402f8425bf6cdb4,
        0xa2f9836e4e0dc1fe2cb80c6334b,
        0x145f306dc9ad590f57cd762752a0,
        0x28be60db92b7b89b41544beba46f,
        0x517cc1b72057a51b112aed731e45,
        0xa2f9836e17f0e95aad539e405542,
        0x145f306dae9eecbdc8ff826b71243,
        0x28be60daba445614e76d187ce4f82,
        0x517cc1b05cbc91abd2fe7f4921e75,
        0xa2f98337fb186652dd8577a994773,
        0x145f3052a032dc1e23c00e5d9aaf49,
        0x28be600246e9ed9fd0ea488467200a,
        0x517cbaecc2acdee4d07cb50e3ba109,
        0xa2f94d1b430cdbf245e9bac7b0f2ad,
        0x145f15447510aba8b0c1b2b7aaa6c7a,
        0x28bd87970a098a6135afd62d2d16923,
        0x5175f85641189e15a72537a0b6bdce8,
        0xa2c350c39626bb303300048a6da76f3,
        0x144447507776686dfe49572c7c78a5a9,
        0x27ece16d7b8e7a377d0fcf2824878347,
        0x4b90147677cc21995a23db6b8d4656bf,
        0x80000000000000000000000000000000,
        0xb46feb898833de66a5dc249472b9a940,
        0xd8131e92847185c882f030d7db787cb8,
        0xebbbb8af8889979201b6a8d383875a56,
        0xf5d3caf3c69d944cfccfffb75925890c,
        0xfae8a07a9bee761ea58dac85f4942317,
        0xfd7427868f5f6759eca5029d2d2e96dc,
        0xfeba0eabb8aef54574f3e4d485559385,
        0xff5d06b2e4bcf3240dba1645384f0d52,
        0xffae8345133d53211b2f834af1c45ef6,
        0xffd7419ffdb91612602f15b77b98dff5,
        0xffeba0cfad5fcd23e1dc3ff1a26550b6,
        0xfff5d067cc804e799ad227a88566b88c,
        0xfffae833e4fa3436e542d0180b6de18a,
        0xfffd7419f2545bba9eb1892e7831b07d,
        0xfffeba0cf925161134237007d948edbc,
        0xffff5d067c91e80f16a552ac61bfaabd,
        0xffffae833e48dfa85ae4eed5128ce1ba,
        0xffffd7419f246d484764beabb4145b90,
        0xffffeba0cf923652a6f0a83289d8ad5f,
        0xfffff5d067c91b1f23e01d347f39ccb4,
        0xfffffae833e48d8e4bfd07bda409324b,
        0xfffffd7419f246c6fd4023033e7b378d,
        0xfffffeba0cf92363798845662ccbb83a,
        0xffffff5d067c91b1bc21292fa81799f1,
        0xffffffae833e48d8ddfc356766420485,
        0xffffffd7419f246c6efb8ecda567c932,
        0xffffffeba0cf9236377d75ea10fcbd77,
        0xfffffff5d067c91b1bbeb0c5704779d7,
        0xfffffffae833e48d8ddf571cc51ce04f,
        0xfffffffd7419f246c6efab65a42d9494,
        0xfffffffeba0cf9236377d5adba4aaed7,
        0xffffffff5d067c91b1bbead63a2bd3fd,
        0xffffffffae833e48d8ddf56b08b6b990,
        0xffffffffd7419f246c6efab581cf76ba,
        0xffffffffeba0cf9236377d5ac0963e9b,
        0xfffffffff5d067c91b1bbead6040efb5,
        0xfffffffffae833e48d8ddf56b01f31e7,
        0xfffffffffd7419f246c6efab580f7035,
        0xfffffffffeba0cf9236377d5ac07b302,
        0xffffffffff5d067c91b1bbead603d8de,
        0xffffffffffae833e48d8ddf56b01ec5a,
        0xffffffffffd7419f246c6efab580f62a,
        0xffffffffffeba0cf9236377d5ac07b15,
        0xfffffffffff5d067c91b1bbead603d8a,
        0xfffffffffffae833e48d8ddf56b01ec5,
        0xfffffffffffd7419f246c6efab580f62,
        0xfffffffffffeba0cf9236377d5ac07b1,
        0xffffffffffff5d067c91b1bbead603d8,
        0xffffffffffffae833e48d8ddf56b01ec,
        0xffffffffffffd7419f246c6efab580f6,
        0xffffffffffffeba0cf9236377d5ac07b,
        0xfffffffffffff5d067c91b1bbead603d,
        0xfffffffffffffae833e48d8ddf56b01e,
        0xfffffffffffffd7419f246c6efab580f,
        0xfffffffffffffeba0cf9236377d5ac07,
        0xffffffffffffff5d067c91b1bbead603,
        0xffffffffffffffae833e48d8ddf56b01,
        0xffffffffffffffd7419f246c6efab580,
        0xffffffffffffffeba0cf9236377d5ac0,
        0xfffffffffffffff5d067c91b1bbead60,
        0xfffffffffffffffae833e48d8ddf56b0,
        0xfffffffffffffffd7419f246c6efab58,
        0xfffffffffffffffeba0cf9236377d5ac,
        0xffffffffffffffff5d067c91b1bbead6,
        0xffffffffffffffffae833e48d8ddf56b,
        0xffffffffffffffffd7419f246c6efab5,
        0xffffffffffffffffeba0cf9236377d5a,
        0xfffffffffffffffff5d067c91b1bbead,
        0xfffffffffffffffffae833e48d8ddf56,
        0xfffffffffffffffffd7419f246c6efab,
        0xfffffffffffffffffeba0cf9236377d5,
        0xffffffffffffffffff5d067c91b1bbea,
        0xffffffffffffffffffae833e48d8ddf5,
        0xffffffffffffffffffd7419f246c6efa,
        0xffffffffffffffffffeba0cf9236377d,
        0xfffffffffffffffffff5d067c91b1bbe,
        0xfffffffffffffffffffae833e48d8ddf,
        0xfffffffffffffffffffd7419f246c6ef,
        0xfffffffffffffffffffeba0cf9236377,
        0xffffffffffffffffffff5d067c91b1bb,
        0xffffffffffffffffffffae833e48d8dd,
        0xffffffffffffffffffffd7419f246c6e,
        0xffffffffffffffffffffeba0cf923637,
        0xfffffffffffffffffffff5d067c91b1b,
        0xfffffffffffffffffffffae833e48d8d,
        0xfffffffffffffffffffffd7419f246c6,
        0xfffffffffffffffffffffeba0cf92363,
        0xffffffffffffffffffffff5d067c91b1,
        0xffffffffffffffffffffffae833e48d8,
        0xffffffffffffffffffffffd7419f246c,
        0xffffffffffffffffffffffeba0cf9236,
        0xfffffffffffffffffffffff5d067c91b,
        0xfffffffffffffffffffffffae833e48d,
        0xfffffffffffffffffffffffd7419f246,
        0xfffffffffffffffffffffffeba0cf923,
        0xffffffffffffffffffffffff5d067c91,
        0xffffffffffffffffffffffffae833e48,
        0xffffffffffffffffffffffffd7419f24,
        0xffffffffffffffffffffffffeba0cf92,
        0xfffffffffffffffffffffffff5d067c9,
        0xfffffffffffffffffffffffffae833e4,
        0xfffffffffffffffffffffffffd7419f2,
        0xfffffffffffffffffffffffffeba0cf9,
        0xffffffffffffffffffffffffff5d067c,
        0xffffffffffffffffffffffffffae833e,
        0xffffffffffffffffffffffffffd7419f,
        0xffffffffffffffffffffffffffeba0cf,
        0xfffffffffffffffffffffffffff5d067,
        0xfffffffffffffffffffffffffffae833,
        0xfffffffffffffffffffffffffffd7419,
        0xfffffffffffffffffffffffffffeba0c,
        0xffffffffffffffffffffffffffff5d06,
        0xffffffffffffffffffffffffffffae83,
        0xffffffffffffffffffffffffffffd741,
        0xffffffffffffffffffffffffffffeba0,
        0xfffffffffffffffffffffffffffff5d0,
        0xfffffffffffffffffffffffffffffae8,
        0xfffffffffffffffffffffffffffffd74,
        0xfffffffffffffffffffffffffffffeba,
        0xffffffffffffffffffffffffffffff5d,
        0xffffffffffffffffffffffffffffffae,
        0xffffffffffffffffffffffffffffffd7,
        0xffffffffffffffffffffffffffffffeb,
        0xfffffffffffffffffffffffffffffff5,
        0xfffffffffffffffffffffffffffffffa,
        0xfffffffffffffffffffffffffffffffd,
        0xfffffffffffffffffffffffffffffffe,
        0xffffffffffffffffffffffffffffffff
    ];

    function arctan(uint256 x) public view returns (uint256) {
        if (x < 2) {
            return 0;
        }

        uint8 bit = log_2(x);
        uint256 base = 1 << bit;
        uint256 db = data[bit];
        uint256 db0 = data[bit - 1];
        return ((db - db0) * (x - base)) / base + db0;
    }

    function log_2(uint256 x) internal pure returns (uint8) {
        uint8 res = 0;

        if (x < 256) {
            while (x > 1) {
                x >>= 1;
                res += 1;
            }
        } else {
            for (uint8 s = 128; s > 0; s >>= 1) {
                if (x >= (1 << s)) {
                    x >>= s;
                    res |= s;
                }
            }
        }

        return res;
    }
}

{
  "optimizer": {
    "enabled": true,
    "runs": 2048
  },
  "outputSelection": {
    "*": {
      "*": [
        "evm.bytecode",
        "evm.deployedBytecode",
        "abi"
      ]
    }
  },
  "libraries": {}
}